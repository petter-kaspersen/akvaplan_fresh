/*! @nrk/core-scroll v4.4.0 - Copyright (c) 2017-2023 NRK
https://static.nrk.no/core-components/major/10/core-scroll/core-scroll.min.js
*/
!function (t, e) {
  "object" == typeof exports && "undefined" != typeof module
    ? module.exports = e()
    : "function" == typeof define && define.amd
    ? define(e)
    : (t = "undefined" != typeof globalThis ? globalThis : t || self)
      .coreScroll = e();
}(this, function () {
  "use strict";
  function t(e) {
    return t = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
      ? function (t) {
        return typeof t;
      }
      : function (t) {
        return t && "function" == typeof Symbol && t.constructor === Symbol &&
            t !== Symbol.prototype
          ? "symbol"
          : typeof t;
      },
      t(e);
  }
  function e(t, e) {
    if (!(t instanceof e)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }
  function n(t, e) {
    for (var n = 0; n < e.length; n++) {
      var o = e[n];
      o.enumerable = o.enumerable || !1,
        o.configurable = !0,
        "value" in o && (o.writable = !0),
        Object.defineProperty(t, o.key, o);
    }
  }
  function o(t, e, o) {
    return e && n(t.prototype, e),
      o && n(t, o),
      Object.defineProperty(t, "prototype", { writable: !1 }),
      t;
  }
  function r(t) {
    return r = Object.setPrototypeOf
      ? Object.getPrototypeOf.bind()
      : function (t) {
        return t.__proto__ || Object.getPrototypeOf(t);
      },
      r(t);
  }
  function i(t, e) {
    return i = Object.setPrototypeOf
      ? Object.setPrototypeOf.bind()
      : function (t, e) {
        return t.__proto__ = e, t;
      },
      i(t, e);
  }
  function s() {
    if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
    if (Reflect.construct.sham) return !1;
    if ("function" == typeof Proxy) return !0;
    try {
      return Boolean.prototype.valueOf.call(
        Reflect.construct(Boolean, [], function () {}),
      ),
        !0;
    } catch (t) {
      return !1;
    }
  }
  function c(t, e, n) {
    return c = s() ? Reflect.construct.bind() : function (t, e, n) {
      var o = [null];
      o.push.apply(o, e);
      var r = new (Function.bind.apply(t, o))();
      return n && i(r, n.prototype), r;
    },
      c.apply(null, arguments);
  }
  function l(t) {
    var e = "function" == typeof Map ? new Map() : void 0;
    return l = function (t) {
      if (
        null === t ||
        (n = t, -1 === Function.toString.call(n).indexOf("[native code]"))
      ) return t;
      var n;
      if ("function" != typeof t) {
        throw new TypeError(
          "Super expression must either be null or a function",
        );
      }
      if (void 0 !== e) {
        if (e.has(t)) return e.get(t);
        e.set(t, o);
      }
      function o() {
        return c(t, arguments, r(this).constructor);
      }
      return o.prototype = Object.create(t.prototype, {
        constructor: {
          value: o,
          enumerable: !1,
          writable: !0,
          configurable: !0,
        },
      }),
        i(o, t);
    },
      l(t);
  }
  function a(t, e) {
    if (e && ("object" == typeof e || "function" == typeof e)) return e;
    if (void 0 !== e) {
      throw new TypeError(
        "Derived constructors may only return object or undefined",
      );
    }
    return function (t) {
      if (void 0 === t) {
        throw new ReferenceError(
          "this hasn't been initialised - super() hasn't been called",
        );
      }
      return t;
    }(t);
  }
  function u(t, e) {
    (null == e || e > t.length) && (e = t.length);
    for (var n = 0, o = new Array(e); n < e; n++) o[n] = t[n];
    return o;
  }
  function f(t, e) {
    var n = "undefined" != typeof Symbol && t[Symbol.iterator] ||
      t["@@iterator"];
    if (!n) {
      if (
        Array.isArray(t) || (n = function (t, e) {
          if (t) {
            if ("string" == typeof t) return u(t, e);
            var n = Object.prototype.toString.call(t).slice(8, -1);
            return "Object" === n && t.constructor && (n = t.constructor.name),
              "Map" === n || "Set" === n ? Array.from(t) : "Arguments" === n ||
                  /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
                ? u(t, e)
                : void 0;
          }
        }(t)) || e && t && "number" == typeof t.length
      ) {
        n && (t = n);
        var o = 0, r = function () {};
        return {
          s: r,
          n: function () {
            return o >= t.length ? { done: !0 } : { done: !1, value: t[o++] };
          },
          e: function (t) {
            throw t;
          },
          f: r,
        };
      }
      throw new TypeError(
        "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.",
      );
    }
    var i, s = !0, c = !1;
    return {
      s: function () {
        n = n.call(t);
      },
      n: function () {
        var t = n.next();
        return s = t.done, t;
      },
      e: function (t) {
        c = !0, i = t;
      },
      f: function () {
        try {
          s || null == n.return || n.return();
        } finally {
          if (c) throw i;
        }
      },
    };
  }
  var d = "undefined" != typeof window, h = d && void 0 !== window.navigator;
  h && /(android)/i.test(navigator.userAgent),
    h && /iPad|iPhone|iPod/.test(String(navigator.platform)),
    d || global.HTMLElement || (global.HTMLElement = function () {
      return o(function t() {
        e(this, t);
      });
    }());
  var p,
    v,
    m =
      (p = "undefined" == typeof window ? {} : window.Element.prototype,
        v = p.matches || p.msMatchesSelector || p.webkitMatchesSelector,
        p.closest
          ? function (t, e) {
            return t.closest(e);
          }
          : function (t, e) {
            for (
              t.correspondingUseElement && (t = t.correspondingUseElement);
              t;
              t = t.parentElement
            ) if (v.call(t, e)) return t;
            return null;
          });
  function y(t, e) {
    var n,
      o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
      r = "prevent_recursive_dispatch_maximum_callstack".concat(e);
    if (t[r]) return !0;
    t[r] = !0,
      "function" == typeof window.CustomEvent
        ? n = new window.CustomEvent(e, {
          bubbles: !0,
          cancelable: !0,
          detail: o,
        })
        : (n = document.createEvent("CustomEvent")).initCustomEvent(
          e,
          !0,
          !0,
          o,
        );
    var i = t.dispatchEvent(n);
    return t[r] = null, i;
  }
  function b(t) {
    var e = arguments.length > 1 && void 0 !== arguments[1]
      ? arguments[1]
      : document;
    if (t) {
      if (t.nodeType) return [t];
      if ("string" == typeof t) return [].slice.call(e.querySelectorAll(t));
      if (t.length) return [].slice.call(t);
    }
    return [];
  }
  var g = {},
    w = {
      up: { y: -1, prop: "top" },
      down: { y: 1, prop: "bottom" },
      left: { x: -1 },
      right: { x: 1 },
    },
    E = function () {
      var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
      try {
        window.addEventListener("test", null, {
          get passive() {
            t = { passive: !0 };
          },
        });
      } catch (t) {}
      return t;
    }(),
    L = d && window.matchMedia &&
      window.matchMedia("(prefers-reduced-motion)").matches,
    M = d && (window.requestAnimationFrame || window.setTimeout),
    x = function (n) {
      !function (t, e) {
        if ("function" != typeof e && null !== e) {
          throw new TypeError(
            "Super expression must either be null or a function",
          );
        }
        t.prototype = Object.create(e && e.prototype, {
          constructor: { value: t, writable: !0, configurable: !0 },
        }),
          Object.defineProperty(t, "prototype", { writable: !1 }),
          e && i(t, e);
      }(f, n);
      var c,
        l,
        u = (c = f, l = s(), function () {
          var t, e = r(c);
          if (l) {
            var n = r(this).constructor;
            t = Reflect.construct(e, arguments, n);
          } else t = e.apply(this, arguments);
          return a(this, t);
        });
      function f() {
        return e(this, f), u.apply(this, arguments);
      }
      return o(f, [{
        key: "connectedCallback",
        value: function () {
          var t, e, n, o, r = this;
          t = this.nodeName,
            e = "\n      ".concat(this.nodeName, "{display:block}\n      ")
              .concat(this.nodeName, "::-webkit-scrollbar{display:none}\n    "),
            n = "style-".concat(t.toLowerCase()),
            o = e.replace(/\/\*[^!][^*]*\*\//g, "").replace(
              /\s*(^|[:;,{}]|$)\s*/g,
              "$1",
            ),
            document.getElementById(n) ||
            document.head.insertAdjacentHTML(
              "afterbegin",
              '<style id="'.concat(n, '">').concat(o, "</style>"),
            ),
            this.style.overflow = "scroll",
            this.style.webkitOverflowScrolling = "touch";
          var i,
            s,
            c,
            l = this.offsetWidth - this.clientWidth,
            a = this.offsetHeight - this.clientHeight;
          this.style.marginRight = "-".concat(l, "px"),
            this.style.marginBottom = "-".concat(a, "px"),
            this.style.maxHeight = "calc(100% + ".concat(a, "px)"),
            this._throttledEvent =
              (i = this.handleEvent.bind(this), s = 500, function () {
                for (
                  var t = arguments.length, e = new Array(t), n = 0;
                  n < t;
                  n++
                ) e[n] = arguments[n];
                c || (c = setTimeout(function () {
                  i.apply(this, e), c = null;
                }, s));
              }),
            this.addEventListener("mousedown", this),
            this.addEventListener("wheel", this, E),
            this.addEventListener("scroll", this._throttledEvent, E),
            window.addEventListener("resize", this._throttledEvent, E),
            window.addEventListener("load", this),
            document.addEventListener("click", this),
            !this._childListObserver && window.MutationObserver &&
            (this._childListObserver = new window.MutationObserver(
              _.bind(this),
            )),
            this._childListObserver &&
            this._childListObserver.observe(this, {
              childList: !0,
              subtree: !0,
            }),
            setTimeout(function () {
              return r.handleEvent();
            });
        },
      }, {
        key: "disconnectedCallback",
        value: function () {
          this._childListObserver && this._childListObserver.disconnect(),
            this._childListObserver = this._throttledEvent = null,
            this.removeEventListener("mousedown", this),
            this.removeEventListener("wheel", this, E),
            this.removeEventListener("scroll", this._throttledEvent, E),
            window.removeEventListener("resize", this._throttledEvent, E),
            window.removeEventListener("load", this),
            document.removeEventListener("click", this);
        },
      }, {
        key: "handleEvent",
        value: function () {
          var t = arguments.length > 0 && void 0 !== arguments[0]
            ? arguments[0]
            : {};
          if (this.parentNode && !t.defaultPrevented) {
            if ("wheel" === t.type) g.animate = !1;
            else if ("mousedown" === t.type) O.call(this, t);
            else if ("click" === t.type) {
              var e = this.id &&
                m(
                  t.target,
                  '[for="'.concat(this.id, '"],[data-for="').concat(
                    this.id,
                    '"]',
                  ),
                );
              e && y(this, "scroll.click", { move: e.value }) &&
                this.scroll(e.value);
            } else {
              var n = k(this);
              j(this, n), y(this, "scroll.change");
              var o = n.left || n.right || n.up || n.down ? "grab" : "";
              t.type ||
                (this.style.cursor = "-webkit-".concat(o),
                  this.style.cursor = o);
            }
          }
        },
      }, {
        key: "scroll",
        value: function (e) {
          var n = this,
            o = function (e, n) {
              var o = e.items,
                r = n && n.nodeType && o.filter(function (t) {
                  return t.contains(n);
                })[0];
              if (r) {
                return {
                  x: Math.max(
                    0,
                    r.offsetLeft - e.offsetLeft -
                      (e.offsetWidth / 2 - r.offsetWidth / 2),
                  ),
                  y: Math.max(
                    0,
                    r.offsetTop - e.offsetTop -
                      (e.offsetHeight / 2 - r.offsetHeight / 2),
                  ),
                };
              }
              n && n.nodeType && !r &&
                console.warn(
                  e,
                  "cannot find child element ".concat(
                    n,
                    " as a valid target for scrolling",
                  ),
                );
              var i = "object" === t(n) ? n : { move: n };
              "number" != typeof i.x && (i.x = e.scrollLeft);
              "number" != typeof i.y && (i.y = e.scrollTop);
              if (i.move = w[i.move]) {
                var s = i.move.x ? "x" : "y",
                  c = i.move.x ? "left" : "top",
                  l = e.getBoundingClientRect(),
                  a = l[c] - e[i.move.x ? "scrollLeft" : "scrollTop"],
                  u = l[c] + l[i.move.x ? "width" : "height"] * i.move[s];
                o.every(function (t) {
                  var e = t.getBoundingClientRect(),
                    o = t.ownerDocument.defaultView.getComputedStyle(
                      t,
                    )["margin-".concat(c)];
                  return i[s] = e[c] - parseInt(o, 10) - a,
                    e[i.move.prop || n] < u;
                });
              }
              return {
                x: Math.max(0, Math.min(i.x, e.scrollWidth - e.clientWidth)),
                y: Math.max(0, Math.min(i.y, e.scrollHeight - e.clientHeight)),
              };
            }(this, e),
            r = o.x,
            i = o.y,
            s = g.animate = Date.now().toString(36) +
              Math.random().toString(36).slice(2, 5),
            c = this.friction,
            l = L ? 1 : r - this.scrollLeft,
            a = L ? 1 : i - this.scrollTop;
          return new Promise(function (t) {
            !function e() {
              g.animate === s && (Math.round(l) || Math.round(a))
                ? (n.scrollLeft = r - Math.round(l *= c),
                  n.scrollTop = i - Math.round(a *= c),
                  M(e))
                : t(o);
            }();
          });
        },
      }, {
        key: "items",
        get: function () {
          return b(this.getAttribute("items") || this.children, this);
        },
        set: function (t) {
          this.setAttribute("items", t || "");
        },
      }, {
        key: "scrollRight",
        get: function () {
          return Math.max(
            0,
            this.scrollWidth - this.clientWidth - this.scrollLeft,
          );
        },
      }, {
        key: "scrollBottom",
        get: function () {
          return Math.max(
            0,
            this.scrollHeight - this.clientHeight - this.scrollTop,
          );
        },
      }, {
        key: "friction",
        get: function () {
          return Math.min(.99, this.getAttribute("friction")) || .8;
        },
        set: function (t) {
          this.setAttribute("friction", t);
        },
      }]),
        f;
    }(l(HTMLElement));
  function O(t) {
    m(t.target, '[contenteditable="true"],input,select,textarea') ||
      0 === t.button &&
        (t.preventDefault(),
          g.pageX = t.pageX,
          g.pageY = t.pageY,
          g.diffSumX = 0,
          g.diffSumY = 0,
          g.animate = g.diffX = g.diffY = 0,
          g.scrollX = this.scrollLeft,
          g.scrollY = this.scrollTop,
          g.target = this,
          document.body.style.cursor = this.style.cursor = "-webkit-grabbing",
          document.body.style.cursor = this.style.cursor = "grabbing",
          document.addEventListener("mousemove", S),
          document.addEventListener("mouseup", T));
  }
  function S(t) {
    g.diffX = g.pageX - (g.pageX = t.pageX),
      g.diffY = g.pageY - (g.pageY = t.pageY),
      g.diffSumX += g.diffX,
      g.diffSumY += g.diffY,
      g.target.scrollLeft = g.scrollX += g.diffX,
      g.target.scrollTop = g.scrollY += g.diffY,
      Math.max(Math.abs(g.diffSumX), Math.abs(g.diffSumY)) > 10 &&
      (g.target.style.pointerEvents = "none");
  }
  function T(t) {
    var e = Math.abs(g.diffX || g.diffY) > 10 ? 20 : 0;
    document.removeEventListener("mousemove", S),
      document.removeEventListener("mouseup", T),
      document.body.style.cursor = "",
      e &&
      g.target.scroll({
        x: g.scrollX + g.diffX * e,
        y: g.scrollY + g.diffY * e,
      }),
      g.target.style.pointerEvents = "",
      g.target.style.cursor = "-webkit-grab",
      g.target.style.cursor = "grab",
      g.target = null;
  }
  function _(t) {
    if (this.parentNode) {
      var e, n = f(t);
      try {
        for (n.s(); !(e = n.n()).done;) {
          if ("childList" === e.value.type) {
            j(this, k(this)), y(this, "scroll.change");
          }
        }
      } catch (t) {
        n.e(t);
      } finally {
        n.f();
      }
    }
  }
  function k(t) {
    return {
      up: Math.floor(t.scrollTop),
      right: Math.floor(t.scrollRight),
      down: Math.floor(t.scrollBottom),
      left: Math.floor(t.scrollLeft),
    };
  }
  function j(t, e) {
    b(t.id && '[for="'.concat(t.id, '"],[data-for="').concat(t.id, '"]'))
      .forEach(function (t) {
        return t.disabled = !e[t.value];
      });
  }
  return x;
}), window.customElements.define("core-scroll", coreScroll);
//# sourceMappingURL=core-scroll.min.js.map
